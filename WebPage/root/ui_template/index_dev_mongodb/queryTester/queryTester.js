(function(e,t){var n=window.b2linkUIClass.container.Panel(e,t);n=window.b2linkUIClass.base.Event_User_Keyboard(e,t,n),n.bStopMouseEvent_Click=!1;
var r="http://localhost:49320/_dev/queryTester/queryTester";
n.extjs_panel,n.extjs_tree;var i=n.$f0(t,"select-JSONViewType"),o=n.$f0(t,"result-count"),a=function(){c(),window.addEventListener("resize",l,!1,0,!0)},c=function(){window.removeEventListener("resize",l,!1)},l=function(e){},d=function(){c(),d["super"]()};d["super"]=n.dispose;var s=function(){STtwUtilXMLHttpReqPost.req__paramsStr(r,p(),s._content_type,s._cbFunctions)};s._content_type={"Content-type":"text/plain"},s._cbFunctions={onabort:function(e){},onerror:function(e){},onloadend:function(e){var t=e.target.responseText;if("1"==i.value)t=JSON.stringify(JSON.parse(t),null,"	");else if("0"==i.value){var n=JSON.parse(t);o.innerText=n.length,t=JSON.stringify(n,function(e,t){try{var n=typeof t,r=t.hasOwnProperty("forEach");(r&&-1!=e.indexOf("_id$")||-1!=e.indexOf("cd$")||-1!=e.indexOf("date_")||-1!=e.indexOf("url_")||"y"==e||"m"==e||"d"==e||"ho"==e||"mi"==e||"se"==e||"values"==e)&&"number"!=n&&"string"!=n&&"null"!=n&&(t=JSON.stringify(t)),(-1!=e.indexOf("_price")||-1!=e.indexOf("address_")||-1!=e.indexOf("cost_")||-1!=e.indexOf("address_")||-1!=e.indexOf("date_")||-1!=e.indexOf("url_")||-1!=e.indexOf("phone_")||"n0"==e||"n1"==e||"n2"==e||"n3"==e||"n4"==e||"nm"==e||"nm_cn"==e||"nm_kr"==e||"nm_us"==e||"manager"==e||"register"==e||"price"==e||"UOM"==e||"valuesMap"==e)&&"number"!=n&&"string"!=n&&"null"!=n&&(t=JSON.stringify(t))}catch(i){window.TtwLog.error(e+"의 value가 문제가 있네 그려 : "+t),window.TtwLog.error(i)}return t},"	").replace(/\\\"/gi,'"').replace(/\"\{/gi,"{").replace(/\}\"/gi,"}").replace(/\\\\/gi,"").replace(/\"\"\[/gi,"[").replace(/\]\"\"/gi,"]").replace(/\:\ /gi," : ").replace(/"null"/gi,"null")}u.TtwEditor_ACE_DES.editor.setValue(t)},onreadystatechange:function(e){}};var _=function(){STtwUtilXMLHttpReqPost.req__paramsStr(r,_._query,_._content_type,_._cbFunctions)};_._query='var r={};var db0=db.getSiblingDB("_schema");var cols=db0.getCollectionNames();var a=cols;var io;var i=0, iLen=a.length;for(;i<iLen;++i){io=a[i];r[io]=[];var col=db0.getCollection(io).find({}).forEach(function(doc){r[io].push(doc._id);});}return r;',_._content_type={"Content-type":"text/plain"},_._cbFunctions={onabort:function(e){},onerror:function(e){},onloadend:function(e){var t=e.target.responseText,r=JSON.parse(t),i={renderTo:document.getElementById("tree-dbs_cols"),title:"MongoDB List",width:300,height:"100%",root:{text:"DBs",expanded:!0,children:[]}},o=i.root.children;for(var a in r){for(var c,l={text:a,expanded:!0,children:[]},d=r[a],_=0,p=d.length;p>_;++_)c=d[_],l.children.push({text:c,leaf:!0});o.push(l)}n.extjs_panel=Ext.create("Ext.tree.Panel",i),n.extjs_tree=n.extjs_panel.items.items[0],n.extjs_tree.addListener("selectionchange",function(e,t,n){var r=t[0].parentNode.data.text,i=t[0].data.text;TtwEditor_ACE_DES.editor.query='var r = [];\n\nvar db0 = db.getSiblingDB( "'+r+'");\n\n	db0.getCollection( "'+i+'" ).find({}).skip(0).limit(100)\n		.forEach( function( doc ){\n\n			r.push( doc );\n\n		});\n\nreturn r;',TtwEditor_ACE_SRC.editor.setValue(TtwEditor_ACE_DES.editor.query),s()})}};var p=function(){return TtwEditor_ACE_SRC.editor.getValue()};a();var u=window;u.Instance.Ttw.UIComponent.Editor_ACE_SRC=new u.Lib.Ttw.CLASS.UIComponent.Editor_ACE({instaceKey:"window.Instance.Ttw.UIComponent.Editor_ACE_SRC",id:"queryTester_src"}),u.Instance.Ttw.UIComponent.Editor_ACE_SRC.ttwInit(),u.Instance.Ttw.UIComponent.Editor_ACE_SRC.removeEvent(),u.TtwEditor_ACE_SRC=u.Instance.Ttw.UIComponent.Editor_ACE_SRC;var E='//Ctrl + Enter 치면 구동됨;\n//F5 누르면 페이지 리프레쉬 되니까 주의;\n//주석은 무조건 //으로 시작해서 ;로 끝나야 한다;\nvar r = [];\n\ndb.getSiblingDB( "list_static" ).country.find({}).forEach( function( doc ){\n	r.push( doc );\n});\n\nreturn r;';u.TtwEditor_ACE_SRC.editor.setValue(E),u.Instance.Ttw.UIComponent.Editor_ACE_DES=new u.Lib.Ttw.CLASS.UIComponent.Editor_ACE({instaceKey:"window.Instance.Ttw.UIComponent.Editor_ACE_DES",id:"queryTester_des"}),u.Instance.Ttw.UIComponent.Editor_ACE_DES.ttwInit(),u.Instance.Ttw.UIComponent.Editor_ACE_DES.removeEvent(),u.TtwEditor_ACE_DES=u.Instance.Ttw.UIComponent.Editor_ACE_DES,_();var f=n.addEventCallBackFunction__ClassName;f("btn-gt",function(e){if("click"==e.type){var t=TtwEditor_ACE_DES.editor.query,n=t.indexOf("skip(")+5,r=t.indexOf(").limit("),i=(parseInt(t.slice(n,r))+100).toString(),o=t.slice(0,n),a=t.slice(r,t.length);TtwEditor_ACE_DES.editor.query=o+i+a,TtwEditor_ACE_SRC.editor.setValue(TtwEditor_ACE_DES.editor.query),s()}}),f("btn-lt",function(e){if("click"==e.type){var t=TtwEditor_ACE_DES.editor.query,n=t.indexOf("skip(")+5,r=t.indexOf(").limit("),i=(parseInt(t.slice(n,r))-100).toString(),o=t.slice(0,n),a=t.slice(r,t.length);TtwEditor_ACE_DES.editor.query=o+i+a,TtwEditor_ACE_SRC.editor.setValue(TtwEditor_ACE_DES.editor.query),s()}}),f("btn-tree_on_off",function(e){if("click"==e.type){var r=n.$f0(t,"editor-tree-list").style;"none"==r.display?r.display="":"none"!=r.display&&(r.display="none")}}),f("btn-source-change-in_function",function(e){if("click"==e.type){var t=TtwEditor_ACE_DES.editor,n=TtwEditor_ACE_SRC.editor,r="./ui_template/index_dev_mongodb/queryTester/templateSource/(function(){})();.js",i=window.b2link.xhr.reqSync_String(r),o="<!=DATA=!>",a=/\/\/var\ fileNm\ =\ .*/gi,c=/var\ fileNm\ =\ .*/gi,l=/\/\/if\(\ console\ \)\ console.log\(\ .*;/gi,d=/if\(\ console\ \)\ console.log\(\ .*;/gi,s=/global\.TtwLog\.timeStamp\(\ .*/gi,_=/\/\/\/\/global\.TtwLog\.timeStamp\(\ .*/gi,p=/\/\/----------------------------------------------------------------------------------------------------;/gi,u=/\r\n/gi,E=/\n/gi,f=/\n\n\n\n/gi,w=/\n\n\n\n\n/gi,g=n.getValue().replace(u,"\n").replace(u,"\n").replace(u,"\n").replace(u,"\n").replace(u,"\n").replace(u,"\n").replace(a,"").replace(c,"").replace(l,"").replace(d,"").replace(s,"//global.TtwLog.timeStamp(").replace(_,"//global.TtwLog.timeStamp(").replace(p,"").replace(s,"//window.TtwLog.timeStamp(").replace(_,"//window.TtwLog.timeStamp(").replace(p,"").replace(w,"\n").replace(f,"\n").replace(E,"\n	");t.setValue(i.replace(o,g))}});var w=n.addEventCallBackFunction__EventType;w("evt_mClick__tree-dbs_cols",function(e){}),w("evt_kUp__tree-dbs_cols",function(e){}),w("evt_kUp__queryTester_src",function(e){e.ctrlKey&&13==e.keyCode&&s()});var g=n;return g.__el=t,g.dispose=d,g});